(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(19)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),i=a.n(l),c=(a(15),a(2)),o=a(3),s=a(6),u=a(4),d=a(1),m=a(5),h=(a(16),a(17),function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).tabHandler=a.tabHandler.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"tabHandler",value:function(e){this.props.tabHandler(e.target.tabIndex)}},{key:"render",value:function(){var e=this,t=this.props.tabIndex,a=["Departures","Arrivals"].map(function(a,n){var l=n===t?"active":"no-active";return r.a.createElement("button",{className:l,tabIndex:n,key:n,onClick:e.tabHandler},a)});return r.a.createElement("nav",null,a)}}]),t}(n.Component));function f(e){var t=e.terminal,a=e.gate,n=e.time,l=e.destination,i=e.airline,c=e.flight,o=e.status,s=e.tabIndex,u="A"===t?"terminal-a":"terminal-d";return r.a.createElement("tr",{className:"flight"},r.a.createElement("td",{className:u},t),"0"===s?r.a.createElement("td",null,a):null,r.a.createElement("td",null,n),r.a.createElement("td",{className:"destination"},l),r.a.createElement("td",null,o),r.a.createElement("td",{className:"airline"},i),r.a.createElement("td",null,c))}a(18);function b(e){var t=e.flights,a=e.getData,n=e.tabIndex,l=t.map(function(e,t){var l=a(e);return r.a.createElement(f,Object.assign({},l,{key:t,tabIndex:n}))});return r.a.createElement("section",{className:"flight-table"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Terminal"),"0"===n?r.a.createElement("th",null,"Gate"):null,r.a.createElement("th",null,"Local time"),r.a.createElement("th",{className:"destination"},"Destination"),r.a.createElement("th",null,"Status"),r.a.createElement("th",{className:"airline"},"Airline"),r.a.createElement("th",null,"Flight"))),r.a.createElement("tbody",null,l)))}function g(e){return e?e.slice(12,16):"-"}function p(e,t){return{ON:"On time",LN:"Landed ".concat(t),CX:"Canceled",DP:"Departed at ".concat(t),CK:"Check-in",DL:"Delayed",BD:"Boarded",FR:"-",CC:"-"}[e]}var v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).requestFlightsHandler=function(e){return function(){if(200===e.status){var t=JSON.parse(e.responseText);a.setState(function(e){return{flights:t.body}})}else a.setState(function(t){return{error:e.status}})}},a.state={tabIndex:0,flights:null,error:0},a.tabHandler=a.tabHandler.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"loadData",value:function(){var e=new Date,t=String(e.getDate()).padStart(2,"0")+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+e.getFullYear();this.setState(function(e){return{flights:null,error:0}}),this.sendRequest("".concat("https://api.iev.aero/api/flights/").concat(t),this.requestFlightsHandler)}},{key:"sendRequest",value:function(e,t){var a=new XMLHttpRequest;a.open("GET",e),a.addEventListener("load",t(a)),a.send()}},{key:"getDepData",value:function(e){return{terminal:e.term,gate:e.gateNo,time:g(e.timeDepShedule),destination:e["airportToID.city_en"],airline:e.airline.en.name,flight:e.codeShareData[0].codeShare,status:p(e.status,g(e.timeDepFact))}}},{key:"getArrivalData",value:function(e){return{terminal:e.term,time:g(e.timeArrShedule),destination:e["airportFromID.city_en"],airline:e.airline.en.name,flight:e.codeShareData[0].codeShare,status:p(e.status,g(e.timeLandFact))}}},{key:"tabHandler",value:function(e){this.setState(function(t){return{tabIndex:e}})}},{key:"render",value:function(){var e,t=this.state,a=t.tabIndex,n=t.flights,l=t.error,i=0===l?"Loading...":"Request error:".concat(l);return e=null===n?r.a.createElement("p",null,i):0===a?r.a.createElement(b,{flights:n.departure,getData:this.getDepData,tabIndex:"0"}):r.a.createElement(b,{flights:n.arrival,getData:this.getArrivalData,tabIndex:"1"}),r.a.createElement("div",{className:"App"},r.a.createElement(h,{tabIndex:a,tabHandler:this.tabHandler}),e)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[9,1,2]]]);
//# sourceMappingURL=main.b03099e4.chunk.js.map